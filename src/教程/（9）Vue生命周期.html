<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Vue生命周期</title>
</head>
<body>
    <div id="demo">
        <button @click="destroyVM">销毁VM</button>

        <p v-show="isShow">you still have lots more to work on</p>
    </div>

    <script type="text/javascript" src="./vue.js"></script>
    <script type="text/javascript">
        const vm = new Vue({
          el: '#demo',
          data: {
            isShow: true
          },
          methods: {
            // 销毁VM
            destroyVM() {
              this.$destroy();
            }
          },
          /**
           * 生命周期第一阶段：初始化页面阶段（只执行1次）
           */
          // 创建前
          beforeCreate() {
            console.log('beforeCreate');
          },
          // 创建完成
          created () {
            console.log('created');
          },
          // 页面加载前
          beforeMount() {
            console.log('beforeMount');
          },
          // 页面加载完成
          mounted() {
            console.log('mounted');
            // 设置定时器
            this.intervalID = setInterval(() => {
                console.log('--- setInterval ---');
                this.isShow = !this.isShow;
            }, 1000)
          },
          /**
           * 生命周期第二阶段：数据更新显示阶段（执行N次）
           */
          // 数据更新前
          beforeUpdate () {
            console.log('beforeUpdate');
          },
          // 数据更新后
          updated() {
            console.log('updated');
          },
          /**
           * 生命周期第三阶段：死亡销毁阶段（只执行1次）
           */
          // 销毁前
          beforeDestroy() {
            console.log('beforeDestroy');
            // 清除定时器
            clearInterval(this.intervalID);
          },
          // 销毁后
          destroyed() {
            console.log('destroyed');
          }
        })

    </script>
</body>
</html>
